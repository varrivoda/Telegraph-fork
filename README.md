## Telegraph Java Library
## Written using Google Guice. Let's try to migrate it to Spring

Forked from [https://github.com/rubenlagus/Telegraph](https://github.com/rubenlagus/Telegraph)
[![MIT License](http://img.shields.io/badge/license-MIT-blue.svg?style=flat)](https://github.com/rubenlagus/Telegraph/blob/master/LICENSE)



Для начала, из коробки не работает. 
Надо поправить версию Guice на 5.0.1
А, еще исходный проект написан на java8... Ну да ладно, работает, обойдусь без List.of() :)

Первым делом надо обратить внимание на TelegraphContext, а именно на конфиг ApiModule.
Ничего необычного, инициализация бинов и синглтонов. По идее можно просто все вырезать, и чинить с помощью Спринга все что сломается.

добавим в pom Спринг 5.2.25.RELEASE, потому что ону меня уже есть скачанный :)

в демке уберем контекст Джуса и создадим спринговый контекст, зарегистрируем туда все что надо, везде где можно ставим аннотации @Component, пишем конфиг класс....


Конечно же всё сломалось. Вообще архитектура данной библиотеки очень странная. Например, есть абстрактный класс TelegraphMethod, который наследуют различные другие классы, по сути являющиеся методами. То есть чтобы совершить какое-либо действие,например создать новую страницу, нужно создать new CreatePage, засетить в неё нужные поля и вызвать метод execute, который берет из контекста Executor......

Всёэто приправлено классами,которые ведут себякак статические, статическими методами, постоянно везде достается вручнуюиз контекста.... вобщем, сплошные антипаттерны. Такое себе первое знакомство с Guice!

Однако при всем этом, идеяавтора хорошо прослеживается, компоненты хорошо структирированы и инкапсулированы, и скорее всего их легко тестировать. Что наводит на нехорогшие мысли о Guice, надо спросить у бывалых - может быть, на нем всегда так принято писать? =)

Короче. Надо взять вот эту замечательную структуру, почти все классы, эксепшены, валидаторы, json-хелперы, и поверх всего этого написать нормальные объекты с нормальными методами, чтото типа паттерна Active Record. Ветку закрываю